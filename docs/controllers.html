<!DOCTYPE html>

<html>
<head>
  <title>controllers.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>controllers.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>angular.module(<span class="hljs-string">'collocationmatching.controllers'</span>, [])</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>With the new view caching in Ionic, Controllers are only called
when they are recreated or on app start, instead of every page change.
To listen for when this page is active (for example, to refresh data),
listen for the $ionicView.enter event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  $scope.$on('$ionicView.enter', function(e) {
  });*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Override default back button behavior in this controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>.controller(<span class="hljs-string">'BackButtonController'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $ionicHistory, $stateParams,
  Data, StateData, SummaryData, Ids</span>)</span>{
  $scope.customGoBack = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Execute normal back button behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $ionicHistory.goBack();</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Execute additional functionality e.g. Update exercise state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> currentState = $ionicHistory.currentStateName();

    <span class="hljs-keyword">if</span>(currentState != <span class="hljs-string">"exercise"</span>){
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> exerciseId = $stateParams.exerciseId;
    <span class="hljs-keyword">var</span> name = $stateParams.collectionName;
    <span class="hljs-keyword">var</span> collId = Ids.getCollId(name);
    <span class="hljs-keyword">var</span> exId = Ids.getExId(collId,exerciseId);</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Update end time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span>(StateData.getSingleState(collId,exId) != <span class="hljs-string">"Complete"</span>){
      <span class="hljs-keyword">var</span> time = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
      <span class="hljs-keyword">var</span> timeNow = $filter(<span class="hljs-string">'date'</span>)(time,<span class="hljs-string">'medium'</span>);
      SummaryData.updateEndTime(collId,exId,timeNow);
    }

    <span class="hljs-keyword">var</span> totalSlides = Data.getSlidesCount(collId,exId);
    <span class="hljs-keyword">if</span>(totalSlides == <span class="hljs-number">0</span>){<span class="hljs-keyword">return</span>;}

    <span class="hljs-keyword">if</span>(SummaryData.getSummary(collId,exId).score == totalSlides){
      StateData.updateState(collId,exId,<span class="hljs-string">"Complete"</span>);
    }
    <span class="hljs-keyword">else</span>{
      StateData.updateState(collId,exId,<span class="hljs-string">"Incomplete"</span>);
    }
  }
})</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Controller for Collections View page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>.controller(<span class="hljs-string">'CollectionsCtrl'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $timeout, $ionicLoading, $state, $ionicPopover, $ionicPopup, Data, 
  $cordovaNetwork, $rootScope, Ids, ionicToast</span>)</span>{
  $scope.title = Data.getTitle();
  $scope.collections = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Request for data from Services.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> getData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isRefreshing</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Show the loading animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $rootScope.show();
    Data.getAllColls(isRefreshing).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Check if response is a 404 error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(response &amp;&amp; response.status == <span class="hljs-number">404</span>){
        ionicToast.show(Data.get404Msg(),<span class="hljs-string">'middle'</span>,<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">return</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Check if response is a timeout error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(response &amp;&amp; response.status == <span class="hljs-number">-1</span>){
        ionicToast.show(Data.getTimeoutMsg(),<span class="hljs-string">'middle'</span>,<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">return</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Otherwise; Set model to response</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $scope.collections = response;
      <span class="hljs-keyword">return</span> response;
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Finally, hide loading animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $rootScope.hide();
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>If device online, fetch data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span>($rootScope.online){
    getData(<span class="hljs-literal">false</span>);
  }
  <span class="hljs-keyword">else</span>{
    ionicToast.show(Data.getErrorMsg(),<span class="hljs-string">'bottom'</span>,<span class="hljs-literal">false</span>,<span class="hljs-number">2500</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Function to refresh data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.doRefresh = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">if</span>($rootScope.online){
      getData(<span class="hljs-literal">true</span>);
    }
    <span class="hljs-keyword">else</span>{
    ionicToast.show(Data.getErrorMsg(),<span class="hljs-string">'bottom'</span>,<span class="hljs-literal">false</span>,<span class="hljs-number">2500</span>);
    }
    $scope.$broadcast(<span class="hljs-string">'scroll.refreshComplete'</span>); 
  };

  $ionicPopover.fromTemplateUrl(<span class="hljs-string">"templates/collections-popover.html"</span>,{
    <span class="hljs-attr">scope</span>: $scope
  }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">popover</span>)</span>{
    $scope.popover = popover;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Function to open popover</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.openPopover = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$event</span>)</span>{
    $scope.popover.show($event);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Function to show ‘About’ popup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.showAbout = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> alertPopup = $ionicPopup.alert({
      <span class="hljs-attr">scope</span>: $scope,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'About Flax'</span>,
      <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'templates/aboutFlax.html'</span>
    });

    alertPopup.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
      <span class="hljs-comment">/*custom functionality*/</span>
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Function to show ‘HowToPlay’ popup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.showHelp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> alertPopup = $ionicPopup.alert({
      <span class="hljs-attr">scope</span>: $scope,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'How to Play'</span>,
      <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'templates/howToPlay.html'</span>
    });

    alertPopup.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
      <span class="hljs-comment">/*custom functionality*/</span>
    });
  }
})</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Controller for Exercises View page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>.controller(<span class="hljs-string">'ExsCtrl'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $timeout, $stateParams, $ionicPopup, $ionicPopover, $rootScope,
  Ids, StateData, SummaryData, Data, ionicToast,$ionicLoading,$ionicListDelegate</span>) </span>{
  
  <span class="hljs-keyword">var</span> name = $stateParams.collectionName;
  $scope.collectionName = name;

  <span class="hljs-keyword">var</span> collId = Ids.getCollId($scope.collectionName);</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Get description for each Collection from Data factory in Services.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> desc = Data.getDesc();
  desc.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>)</span>{
    <span class="hljs-keyword">if</span>(val.key == name){
      $scope.collDesc = val.desc;
      $scope.collName = val.name;
    }
  });

  <span class="hljs-keyword">if</span>(!$scope.collDesc){
    $scope.collDesc = <span class="hljs-string">"n/a"</span>;
    $scope.collName = <span class="hljs-string">"n/a"</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Create new data for this collection if not already created</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span>(!StateData.isCreated(collId)){
    StateData.createColl(collId);
  }
  <span class="hljs-keyword">if</span>(!SummaryData.isCreated(collId)){
    SummaryData.createColl(collId);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Function to fetch data from Services.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> getData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">collId,isRefreshing</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Show loading animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $rootScope.show();
    Data.getAllEx(collId,isRefreshing).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Check 404 error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(response.status &amp;&amp; response.status == <span class="hljs-number">404</span>){
        ionicToast.show(Data.get404Msg(),<span class="hljs-string">'middle'</span>,<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">return</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Check timeout error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(response &amp;&amp; response.status == <span class="hljs-number">-1</span>){
        ionicToast.show(Data.getTimeoutMsg(),<span class="hljs-string">'middle'</span>,<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">return</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Otherwise; set exercises model to response</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $scope.exercises = response;</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Setup starting state if not already exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;$scope.exercises.length;i++){
        <span class="hljs-keyword">var</span> exerciseId = $scope.exercises[i]._id;
        <span class="hljs-keyword">var</span> exId = Ids.getExId(collId,exerciseId);
        <span class="hljs-keyword">var</span> currentState = StateData.getSingleState(collId,exId);
        <span class="hljs-keyword">if</span>(currentState){
          StateData.updateState(collId,exId,currentState);
        }
        <span class="hljs-keyword">else</span>{
          StateData.updateState(collId,exId,<span class="hljs-string">"New"</span>);
        }
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Get states model from StateData factory in Services.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $scope.states = StateData.getAllStates(collId);
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Finally hide the loading animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $rootScope.hide();
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Execute fetch data function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getData(collId,<span class="hljs-literal">false</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Function to Refresh Exercises View page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.doRefresh = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">if</span>($rootScope.online){
      getData(collId,<span class="hljs-literal">true</span>); 
    }
    <span class="hljs-keyword">else</span>{
      ionicToast.show(Data.getErrorMsg(),<span class="hljs-string">'middle'</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Notify the controller that refreshing is complete</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $scope.$broadcast(<span class="hljs-string">'scroll.refreshComplete'</span>); 
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Function to get Exercise Id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.getId = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">exerciseId</span>)</span>{
    <span class="hljs-keyword">return</span> Ids.getExId(collId,exerciseId);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Function to Restart the game</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.doRestart = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ex</span>)</span>{
    <span class="hljs-keyword">var</span> exId = Ids.getExId(collId,ex);
    SummaryData.clearSummary(collId,exId);
    StateData.updateState(collId,exId,<span class="hljs-string">"New"</span>);
    $ionicListDelegate.closeOptionButtons();
    <span class="hljs-keyword">var</span> words = Data.getWords(collId,exId);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;words.length;i++){
      <span class="hljs-keyword">var</span> word = words[i];
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>;j&lt;word.length;j++){
        word[j].drop = <span class="hljs-string">""</span>;
        word[j].isDraggable = <span class="hljs-literal">true</span>;
      }
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Use this method to refresh states based on data saved in StateData factory
each time Exercise View is activated.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.$on(<span class="hljs-string">'$ionicView.enter'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    $scope.states = StateData.getAllStates(collId);<span class="hljs-comment">//refresh states</span>
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Create Popover and bind it with local model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $ionicPopover.fromTemplateUrl(<span class="hljs-string">"templates/exercises-popover.html"</span>,{
    <span class="hljs-attr">scope</span>: $scope
  }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">popover</span>)</span>{
    $scope.popover = popover;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Function to open popover</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.openPopover = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$event</span>)</span>{
    $scope.popover.show($event);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Function to show ‘About’ popup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.showAbout = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> alertPopup = $ionicPopup.alert({
      <span class="hljs-attr">scope</span>: $scope,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'About '</span>+name,
      <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'templates/aboutCollection.html'</span>
    });

    alertPopup.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
      <span class="hljs-comment">/*custom functionality*/</span>
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Function to show ‘HowToPlay’ popup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.showHelp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> alertPopup = $ionicPopup.alert({
      <span class="hljs-attr">scope</span>: $scope,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'How to Play'</span>,
      <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'templates/howToPlay.html'</span>
    });

    alertPopup.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
      <span class="hljs-comment">/*custom functionality*/</span>
    });
  }
})</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Controller for Game View page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>.controller(<span class="hljs-string">'ExerciseCtrl'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $stateParams, $ionicLoading, $ionicPopup, $ionicPopover,$filter, $timeout,
  ionicToast, Ids, SummaryData, Data, $rootScope</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Index of initial slide</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.slideIndex = <span class="hljs-number">0</span>;
  $scope.hide = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Show loading animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $rootScope.show();
  <span class="hljs-keyword">var</span> exerciseId = $stateParams.exerciseId;
  <span class="hljs-keyword">var</span> collectionName = $stateParams.collectionName;
  <span class="hljs-keyword">var</span> collId = Ids.getCollId(collectionName);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Fetch exId from Ids factory as exIds are already created in ‘ExsCtrl’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> exId = Ids.getExId(collId,exerciseId);
  <span class="hljs-keyword">if</span>(!SummaryData.getSummary(collId,exId)){
    SummaryData.createSummary(collId,exId);
    <span class="hljs-keyword">var</span> time = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    <span class="hljs-keyword">var</span> timeNow = $filter(<span class="hljs-string">'date'</span>)(time,<span class="hljs-string">'medium'</span>);<span class="hljs-comment">//angularjs date format</span>
    SummaryData.updateStartTime(collId,exId,timeNow);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Fisher-Yates shuffle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> shuffle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">array</span>) </span>{
    <span class="hljs-keyword">var</span> m = array.length, t, i;</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>While there remain elements to shuffle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">while</span> (m) {</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Pick a remaining element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      i = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * m--);</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>And swap it with the current element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      t = array[m];
      array[m] = array[i];
      array[i] = t;
    }
    <span class="hljs-keyword">return</span> array;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Update summary model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.summary = SummaryData.getSummary(collId,exId);</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Initialize drags model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.drags = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Fetch Game data from Data Factory in Services.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Data.getSingleEx(collId,exId).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Check 404 error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span>(response.status == <span class="hljs-number">404</span>){
      ionicToast.show(Data.get404Msg(),<span class="hljs-string">'middle'</span>,<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Check timeout error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span>(response &amp;&amp; response.status == <span class="hljs-number">-1</span>){
      ionicToast.show(Data.getTimeoutMsg(),<span class="hljs-string">'middle'</span>,<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Otherwise set words model to response</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $scope.words = response;
    $scope.slides = Data.getSlidesCount(collId,exId);
    $scope.slideCount = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>($scope.slides);</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Shuffle slides keeping local words unshuffled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> N = Data.getMinSlidesCount(collId,exId);
    <span class="hljs-keyword">var</span> temp = <span class="hljs-built_in">Array</span>.apply(<span class="hljs-literal">null</span>, {<span class="hljs-attr">length</span>: N}).map(<span class="hljs-built_in">Number</span>.call,<span class="hljs-built_in">Number</span>);
    <span class="hljs-keyword">var</span> shuffled = shuffle(temp);<span class="hljs-comment">//[].concat(shuffle(temp));</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;$scope.words.length;i++){
      <span class="hljs-keyword">var</span> arr = [];
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>;j&lt;$scope.words[i].length;j++){
        <span class="hljs-keyword">if</span>(j &gt;= shuffled.length){
          arr[j] = $scope.words[i][j];
        }
        <span class="hljs-keyword">else</span>{
          <span class="hljs-keyword">var</span> val = shuffled[j];
          arr[j] = $scope.words[i][val];
        }
      }
      $scope.words[i] = arr;
    }

    <span class="hljs-comment">/*Shuffle without maintaining order
     for(var j=0 ; j&lt;$scope.words.length; j++){
       $scope.words[j] = shuffle($scope.words[j]);
     }*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Create a shuffled array for shuffling partial phrases</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> count = $scope.words.length;
    <span class="hljs-keyword">var</span> tmp = <span class="hljs-built_in">Array</span>.apply(<span class="hljs-literal">null</span>, {<span class="hljs-attr">length</span>: count}).map(<span class="hljs-built_in">Number</span>.call,<span class="hljs-built_in">Number</span>);
    <span class="hljs-comment">/* $scope.drags = [].concat(shuffle(tmp)); */</span>
    $scope.drags = shuffle(tmp);

  }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Finally hide loading animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $rootScope.hide();
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Get Game title from Data factory</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.title = Data.getExTitle(collId,$stateParams.exerciseId);</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Generate options for slides</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.options = {
    <span class="hljs-attr">pagination</span>: <span class="hljs-string">'.swiper-pagination'</span>,
    <span class="hljs-attr">loop</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">spaceBetween</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">initialSlide</span>: $scope.slideIndex,
    <span class="hljs-attr">effect</span>: <span class="hljs-string">'slide'</span><span class="hljs-comment">//fade,slide,cube,coverflow,flip (http://idangero.us/swiper/api)</span>
    <span class="hljs-comment">/* freeModeSticky: true, 
    speed: 500 */</span>
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Function to Check answer on button click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.checkAnswer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">if</span>(!checkAll()){
      ionicToast.show(<span class="hljs-string">'Answer Incorrect!'</span>,<span class="hljs-string">'middle'</span>,<span class="hljs-literal">false</span>,<span class="hljs-number">2500</span>);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Function check answer </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  checkAll = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">if</span>(!$scope.words || $scope.words.length == <span class="hljs-number">0</span>){
      <span class="hljs-keyword">return</span> $scope.hide;
    }
    <span class="hljs-keyword">var</span> all_words = <span class="hljs-number">0</span>, correct_words = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;$scope.words.length;i++){
      <span class="hljs-keyword">var</span> word = $scope.words[i];
      <span class="hljs-keyword">if</span>(word[$scope.slideIndex]){<span class="hljs-comment">//critical check</span>
        all_words++;
        SummaryData.createSummary(collId,exId);
        $scope.hide = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span>(word[$scope.slideIndex].isCorrect){
          correct_words++;
        }
      }
    }
    <span class="hljs-keyword">if</span>(all_words == correct_words){
      SummaryData.updateScore(collId,exId,$scope.slideIndex);
      $scope.hide = <span class="hljs-literal">true</span>;
      ionicToast.show(<span class="hljs-string">'Well done!'</span>,<span class="hljs-string">'bottom'</span>,<span class="hljs-literal">false</span>,<span class="hljs-number">2000</span>);
    }
    <span class="hljs-keyword">else</span>{
      $scope.hide = <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> $scope.hide;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Refresh data each time game starts and slides initialized</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.$on(<span class="hljs-string">"$ionicSlides.sliderInitialized"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, data</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>data.slider is the instance of Swiper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $scope.slideIndex = data.slider.activeIndex;
    checkAll();</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Update the view by calling $scope.$apply()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $scope.$apply();
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Refresh data each time slide change starts.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.$on(<span class="hljs-string">"$ionicSlides.slideChangeStart"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, data</span>)</span>{
    $scope.slideIndex = data.slider.activeIndex;
    checkAll();</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Update the view by calling $scope.$apply()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $scope.$apply();
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Functionality when slide change ends.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.$on(<span class="hljs-string">"$ionicSlides.slideChangeEnd"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, data</span>)</span>{
    <span class="hljs-comment">/* note: the indexes are 0-based
     $scope.activeIndex = data.activeIndex;
     $scope.previousIndex = data.previousIndex;*/</span>
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Function to implement on successful dragging a draggable text from top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.dragSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data,evt,index,slideIndex</span>)</span>{
    $scope.words[index][slideIndex].isDraggable = <span class="hljs-literal">false</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>Function to implement after Successful dragging an in-game text</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.onDragSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data,evt,wordId,slideIndex</span>)</span>{
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;$scope.words.length;i++){
      <span class="hljs-keyword">var</span> word = $scope.words[i];
      <span class="hljs-keyword">if</span>(word[slideIndex] &amp;&amp; (word[slideIndex].id == wordId)){
        $scope.words[i][slideIndex].drop = <span class="hljs-string">""</span>;
      }
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Function to implement after successful dropping an item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.onDropComplete = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data,evt,wordId,slideIndex</span>)</span>{
    <span class="hljs-keyword">var</span> done = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;$scope.words.length;i++){
      <span class="hljs-keyword">var</span> word = $scope.words[i];
      <span class="hljs-keyword">if</span>(word[slideIndex] &amp;&amp; (word[slideIndex].id == wordId)){
        <span class="hljs-keyword">var</span> value = $scope.words[i][slideIndex].drop;
        <span class="hljs-keyword">if</span>(value != data){
          $scope.words[i][slideIndex].drop = data;
          done = value;
        }
      }
    }
    <span class="hljs-keyword">if</span>(done){
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;$scope.words.length;i++){
        <span class="hljs-keyword">var</span> word = $scope.words[i];
        <span class="hljs-keyword">if</span>(word[slideIndex] &amp;&amp; (word[slideIndex].right == done)){
          word[slideIndex].isDraggable = <span class="hljs-literal">true</span>;
        }
      }
    }
    checkAll();
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Initialize ionic popover and bind to model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $ionicPopover.fromTemplateUrl(<span class="hljs-string">"templates/ex-detail-popover.html"</span>,{
    <span class="hljs-attr">scope</span>: $scope
  }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">popover</span>)</span>{
    $scope.popover = popover;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Function to open popover</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.openPopover = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$event</span>)</span>{
    $scope.popover.show($event);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Function to show summary popup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.showSummary = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> alertPopup = $ionicPopup.alert({
      <span class="hljs-attr">scope</span>: $scope,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'Summary report'</span>,
      <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'templates/summary.html'</span>
    });

    alertPopup.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
      <span class="hljs-comment">/*custom functionality*/</span>
    });

    <span class="hljs-comment">/*close popup after 3 seconds
     $timeout(function(){
       alertPopup.close();
     }, 5000);*/</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Funciton to show restart game popup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $scope.restartGame = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> confirmPopup = $ionicPopup.confirm({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'Restart this Game!'</span>,
      <span class="hljs-attr">template</span>: <span class="hljs-string">'Would you like to restart this game?'</span>
    });

    confirmPopup.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
      <span class="hljs-keyword">if</span>(response){</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Clear model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        SummaryData.clearSummary(collId,exId);
        SummaryData.createSummary(collId,exId);
        $scope.hide = <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">var</span> time = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
        <span class="hljs-keyword">var</span> timeNow = $filter(<span class="hljs-string">'date'</span>)(time,<span class="hljs-string">'medium'</span>);<span class="hljs-comment">//angularjs date format</span>
        SummaryData.updateStartTime(collId,exId,timeNow);</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Clear view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;$scope.words.length;i++){
          <span class="hljs-keyword">var</span> word = $scope.words[i];
          <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>;j&lt;word.length;j++){
            word[j].drop = <span class="hljs-string">""</span>;
            word[j].isDraggable = <span class="hljs-literal">true</span>;
          }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Update summary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $scope.summary = SummaryData.getSummary(collId,exId);
      }
      <span class="hljs-keyword">else</span>{
        <span class="hljs-comment">/* console.log("no");*/</span>
      }
    });
  }
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
